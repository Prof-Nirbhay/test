<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>PracGenWeb</title>

<style>
body{
    font-family:"Times New Roman", Times, serif;
    background:#eef1f5;
    margin:0;
    padding:0;
}

.container{
    max-width:900px;
    margin:30px auto;
    background:#fff;
    padding:25px;
    border-radius:8px;
    box-shadow:0 4px 12px rgba(0,0,0,0.15);
}

.header{
    display:flex;
    align-items:center;
    gap:15px;
    border-bottom:2px solid #1f4fd8;
    padding-bottom:10px;
    margin-bottom:15px;
}

.header img{
    height:70px;
}

.header-text{
    text-align:center;
    flex:1;
}

label{
    font-weight:bold;
    display:block;
    margin-top:10px;
}

input, textarea, select{
    width:100%;
    padding:6px;
    font-family:"Times New Roman", Times, serif;
    font-size:12pt;
    margin-top:4px;
}

.actions{
    display:flex;
    justify-content:center;
    gap:15px;
    margin-top:20px;
}

button{
    padding:8px 18px;
    font-size:12pt;
    border:none;
    border-radius:4px;
    cursor:pointer;
    background:#1f4fd8;
    color:#fff;
}

button:hover{
    background:#163bb3;
}

.modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    z-index:1000;
}

.modal-box{
    background:#fff;
    width:90%;
    max-width:950px;
    margin:30px auto;
    padding:15px;
}

.modal-actions{
    text-align:right;
    margin-bottom:8px;
}

iframe{
    width:100%;
    height:600px;
    border:1px solid #000;
}

.footer {
  text-align: center;
  font-size: 13px;
  color: #555;
  margin-top: 40px;
  padding: 12px 0;
  border-top: 1px solid #ddd;
}

#helpBtn {
  position: fixed;       /* Makes it stay at corner */
  top: 20px;             /* Distance from top */
  right: 20px;           /* Distance from right */
  padding: 8px 16px;
  background-color: #4CAF50;
  color: white;
  border: none;
  border-radius: 6px;
  cursor: pointer;
  font-weight: bold;
  z-index: 10000;        /* Keeps it above everything */
}

#helpBtn:hover {
  background-color: #45a049;
}

.help-modal {
  display: none;
  position: fixed;
  z-index: 9999;
  left: 0;
  top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
}

.help-box {
  background: white;
  width: 450px;
  margin: 8% auto;
  padding: 20px;
  border-radius: 10px;
  position: relative;
  animation: fadeIn 0.3s ease-in-out;
}

.close-help {
  position: absolute;
  right: 15px;
  top: 10px;
  font-size: 22px;
  cursor: pointer;
  font-weight: bold;
}

.help-step {
  display: flex;
  margin-bottom: 15px;
}

.help-step span {
  background: #4CAF50;
  color: white;
  width: 25px;
  height: 25px;
  text-align: center;
  border-radius: 50%;
  margin-right: 10px;
  font-weight: bold;
}

.sub-points {
  margin-left: 35px;
  font-size: 14px;
}

@keyframes fadeIn {
  from {opacity: 0;}
  to {opacity: 1;}
}
    
</style>
</head>

<body>

<div class="container">

<div class="header">
    <img src="college_logo.png" alt="College Logo">
    <div class="header-text">
        <h2>Practical Exam Question Paper Generator</h2>
        <h4>DEPARTMENT OF ADVANCED COMPUTING</h4>
    </div>
</div>

<label>Class:</label>
<select id="class">
<option>FYBSc CS AIML</option>
<option>SYBSc CS AIML</option>
<option>TYBSc CS AIML</option>
<option>FYBSc CS CTIS</option>
<option>SYBSc CS CTIS</option>
<option>TYBSc CS CTIS</option>
<option>FYMSc CS</option>
<option>SYMSc CS</option>
<option>FYMSc CS (CYBER)</option>
<option>SYMSc CS (CYBER)</option>
<option>SYBSc IT</option>
<option>FYBSc IT</option>
</select>

<label>Semester:</label>
<select id="semester">
<option>I</option><option>II</option><option>III</option>
<option>IV</option><option>V</option><option>VI</option>
</select>

<label>Subject Name:</label>
<input type="text" id="subject">

<label>Questions (Enter = New Question, Tab = Sub-question):</label>
<textarea id="questions" rows="8"></textarea>

<div class="actions">
<button onclick="openPreview()">Preview</button>
<button onclick="downloadWord()">Download Word</button>
</div>

</div>

<div class="modal" id="previewModal">
<div class="modal-box">
<div class="modal-actions">
    <button onclick="downloadPDF()">Download PDF</button>
    <button onclick="printPaper()">Print</button>
    <button onclick="closePreview()">Close</button>
</div>
<iframe id="previewFrame"></iframe>
</div>
</div>

<button id="helpBtn" onclick="openHelp()">❓ Help</button>
<div id="helpModal" class="help-modal">
  <div class="help-box">

    <span class="close-help" onclick="closeHelp()">&times;</span>

    <h2>How to Use the Website</h2>

    <div class="help-step">
      <span>1</span>
      <p>Select <b>Class</b> and <b>Semester</b></p>
    </div>

    <div class="help-step">
      <span>2</span>
      <p>Enter the <b>Subject Name</b></p>
    </div>

    <div class="help-step">
      <span>3</span>
      <p>Add <b>Practical Questions</b> (one per line)</p>
        </div>
      <div class="help-step">
        <ul class="sub-points">
        <li>Write only <b>one question per line</b>.</li>
        <li>Press <b>Enter</b> after each question.</li>
        <li>Use <b>Enter+TAB</b> for sub-questions.</li>
        <li>Each line is treated as a <b>Separate Question</b> Except <b>Enter+Tab</b>.</li>
      </ul>
    </div>
    <div class="help-step">
      <span>4</span>
      <p>Click <b>Preview</b> to print or download PDF</p>
    </div>

    <div class="help-step">
      <span>5</span>
      <p>Click <b>Download Word</b> for final submission</p>
    </div>
  </div>
</div>
    
<script>

    /* Allow TAB inside textarea */
document.getElementById("questions").addEventListener("keydown", function(e) {
    if (e.key === "Tab") {
        e.preventDefault();
        const start = this.selectionStart;
        const end = this.selectionEnd;
        this.value = this.value.substring(0, start) + "\t" + this.value.substring(end);
        this.selectionStart = this.selectionEnd = start + 1;
    }
});

function buildHTML(){

    const cls = document.getElementById("class").value;
    const sem = document.getElementById("semester").value;
    const subject = document.getElementById("subject").value.trim();

    const rawLines = document.getElementById("questions").value
        .split(/\r?\n/)
        .filter(line => line.trim() !== "");

    let qs = [];
    let current = null;

    rawLines.forEach(line => {
        if(line.startsWith("\t")){
            if(current){
                current.sub.push(line.trim());
            }
        } else {
            if(current) qs.push(current);
            current = {
                main: line.trim(),
                sub: []
            };
        }
    });

    if(current) qs.push(current);

    if(!subject || qs.length < 2){
        alert("Enter subject name and at least two main questions.");
        return null;
    }

    let html = `
    <html>
    <body style="font-family:'Times New Roman'; font-size:12pt; font-weight:bold;">
    `;

    for(let i=0; i<qs.length; i++){
        for(let j=i+1; j<qs.length; j++){

html += `
<table width="100%" cellpadding="6" cellspacing="0">

<tr>
<td colspan="3" align="center">
<b>
NAGINDAS KHANDWALA COLLEGE, MALAD(W)<br>
(Empowered Autonomous)<br><br>
${cls} SEM ${sem} PRACTICAL EXAMINATION FEBRUARY- 2026
</b>
</td>
</tr>

<tr>
<td colspan="3">
<table width="100%">
<tr>
<td align="left">Time: 2 Hours</td>
<td align="right">Roll No: __________</td>
</tr>
</table>
</td>
</tr>

<tr>
<td colspan="3">
<table width="100%">
<tr>
<td align="left">Course: ${subject}</td>
<td align="right">Marks: 50</td>
</tr>
</table>
</td>
</tr>

<!-- Q1 -->
<tr>
<td align="center" style="white-space:nowrap;"><b>Q1</b></td>
<td width="100%">
${qs[i].main}
${qs[i].sub.map((s,index)=>
`<div style="margin-left:25px;">(${String.fromCharCode(97+index)}) ${s}</div>`
).join("")}
</td>
<td align="center" style="white-space:nowrap;"><b>20</b></td>
</tr>

<!-- Q2 -->
<tr>
<td align="center" style="white-space:nowrap;"><b>Q2</b></td>
<td width="100%">
${qs[j].main}
${qs[j].sub.map((s,index)=>
`<div style="margin-left:25px;">(${String.fromCharCode(97+index)}) ${s}</div>`
).join("")}
</td>
<td align="center" style="white-space:nowrap;"><b>20</b></td>
</tr>

<!-- Q3 -->
<tr>
<td align="center" style="white-space:nowrap;"><b>Q3</b></td>
<td>VIVA</td>
<td align="center" style="white-space:nowrap;"><b>05</b></td>
</tr>

<!-- Q4 -->
<tr>
<td align="center" style="white-space:nowrap;"><b>Q4</b></td>
<td>JOURNAL</td>
<td align="center" style="white-space:nowrap;"><b>05</b></td>
</tr>

</table>
<br><br><br>
`;
        }
    }

    html += `</body></html>`;
    return html;
}

function openPreview(){
    const html = buildHTML();
    if(!html) return;
    document.getElementById("previewFrame").srcdoc = html;
    document.getElementById("previewModal").style.display = "block";
}

function closePreview(){
    document.getElementById("previewModal").style.display = "none";
}

function downloadWord(){
    const html = buildHTML();
    if(!html) return;
    const blob = new Blob([html], {type:"text/html"});
    const a = document.createElement("a");
    a.href = URL.createObjectURL(blob);
    a.download = document.getElementById("subject").value + ".doc";
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
}

function printPaper(){
    const html = buildHTML();
    const w = window.open("");
    w.document.write(html);
    w.document.close();
    w.print();
}

function downloadPDF(){
    printPaper();
}

function openHelp(){
  document.getElementById("helpModal").style.display = "block";
}

function closeHelp(){
  document.getElementById("helpModal").style.display = "none";
}

window.onclick = function(event) {
  const modal = document.getElementById("helpModal");
  if (event.target === modal) {
    modal.style.display = "none";
  }
}


</script>

<footer class="footer">
  © 2026 Department of Advanced Computing,
  Nagindas Khandwala College, Malad (W).
  All Rights Reserved.
</footer>

</body>
</html>
